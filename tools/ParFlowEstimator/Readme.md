# ParFlow Run-Time and Memory Footprint Estimator
This tool estimates the run-time and memory footprint of a ParFlow test script.
The output is a report (in JSON format) of the script's configuration used in the estimation, and the results of that estimation.

The below examples shows how to run the tool on the sinusoidal domain using the example from its Readme.
```bash
# Parameters used in the sinusoidal test case
test_name=estimating_example_test_run

number_cells_X=10
number_cells_Y=100
number_cells_Z=20

number_timesteps=100

number_processes_X=4
number_processes_Y=2
number_processes_Z=1

# Running estimator tool
./parflow_size_time_predictor.py \
  ../../test_domains/sinusoidal/assets/sinusoidal.tcl \
  ${number_processes_X} ${number_processes_Y} ${number_processes_Z} \
  ${number_cells_X} ${number_cells_Y} ${number_cells_Z} \
  ${number_timesteps} \
  ${test_name}
```

## Complete Usage

positional arguments:
  file_path             Path to the input tcl script.
  execution_arguments   Arguments necessary to execute the input tcl script, if any.

optional arguments:
* -h, --help
  - Show this help message and exit

* --report-output REPORT_OUTPUT_PATH
  - Specify path to write report output to instead of standard out.

* --generated-script-path GENERATED_SCRIPT_PATH
  - Specify path of new script file generated by this tool.
  - Default: <file_path>.<GENERATED_SCRIPT_SUFFIX>

* --allow-clobber
  - Allows overwriting of existing files.

* --generated-script-suffix GENERATED_SCRIPT_SUFFIX
  - Specify suffix for creating the path of new script file generated by this tool.
  - Default: .size_determination.generated.tcl

* --backup-suffix BACKUP_SUFFIX
  - Suffix used when --in-place-generation set without exact path.
  - Default: .size_determination.automated_backup.original.tcl

* --in-place-generation [BACKUP_PATH]
  - Enables in-place generation of new script.
  - Instead of writing generated script to a new location, makes backup of input script and writes generated script to <file_path>.
  - Optional argument BACKUP_PATH specifies exact path to place backup of input script.
  - Default: <file_path>.<BACKUP_SUFFIX>

* --no-execute
  - Disables execution of generated script and prediction of runtime and footprint.

* --exact-command
  - Execution arguments will be interpreted as the *exact* execution command without any modifications or additions

* --tcl-shell TCL_SHELL
  - Command used to execute tcl scripts.
  - Default: tclsh

* --prediction-module PREDICTION_MODULE
  - Set path to prediction module.
  - Default: ./default_prediction_module.py

* --footprint-prediction-function FOOTPRINT_PREDICTION_FUNCTION
  - Set function from prediction module to use to predict ParFlow footprint.
  - Default: "footprint_prediction_function"

* --runtime-prediction-function RUNTIME_PREDICTION_FUNCTION
  - Set function from prediction module to use to predict ParFlow runtime.
  - Default: "runtime_prediction_function"

* --debug:
  - Enable debugging output in tool.


## Report Format
The tool outputs the report as a JSON object with the following structure:
```JSON
{'configuration': {'grid': {'NX': 'int',
                            'NY': 'int',
                            'NZ': 'int'},
                   'process_topology': {'NP': 'int',
                                        'NQ': 'int',
                                        'NR': 'int'},
                   'time': {'time_steps': 'float'}},
 'estimation': {'footprint': {'units': 'string',
                              'value': 'float'},
                'runtime': {'units': 'string',
                            'value': 'float'}}}
```

(Here, the values are strings that name the type of values actually emitted in the report.)

JSON is the chosen format, because it is a well standardized format that is easy to parse in many languages using numerous libraries and tools.

## Prediction Module
The tool was developed in a way that allows users to easily exchange
